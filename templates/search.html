[[extend 'layout.html']]

<style>
    [v-cloak] {
        display: none;
    }
</style>    

<div class="section" id="vue-target" v-cloak>
    <div class="columns">
        <div class="column is-two-thirds notification is-dark m-1">
            <div class="block">
                <div class="field">
                    <div class="control">
                        <input class="input is-large" type="text" placeholder="Search for a company" v-model = "search"  @change = "search_company">
                    </div>
                </div>
            </div>
            
            <div class="block">
                <table class="table is-fullwidth is-striped is-hoverable">
                    <thead>
                        <th>Name</th>
                        <th>Symbol</th>
                        <th>Price</th>
                    </thead>
                    <tbody>
                        <tr v-for = "r in search_rows">
                            <td>
                                <p>{{r.company_name}}</p>
                            </td>
                            <td>
                                <p>{{r.company_symbol}}</p>
                            </td>
                            <td>
                                <p>{{r.current_stock_value}}</p>
                            </td>
                        
                            <td>
                                <a class = "button is-success" v-bind:href = "r.url">
                                    <span class = "icon"><i class = "fa fa-angle-right"></i></span>
                                </a>
                            </td>
                        </tr>
                       

                    </tbody>
                </table>
            </div>
        </div>
        <div class="column notification is-dark m-1">
        
            <div class="box">
                <h1 class="title is-4">Stock preview (click image)</h1>
                <a href="[[=URL('company')]]">
                    <img src="https://i.kym-cdn.com/photos/images/newsfeed/001/499/826/2f0.png">
                </a>
            </div>
            <div class="box has-text-centered">
                <p><a href="">Buy</a> <a href="">Sell</a></p>
                <p><a href="">Call</a> <a href="">Put</a></p>
             </div>
        </div>
        
    </div>
</div>

[[block page_scripts]]
<!-- Loads the search-specific js for Vue -->
<script>
    let search_data_url = "[[=XML(search_data_url)]]"
    let company_url = "[[=XML(company_url)]]"
</script>
<script src="js/search.js"></script>
[[end]]
